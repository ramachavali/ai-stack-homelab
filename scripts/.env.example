# =================================================================
# AI Stack Environment Configuration
# =================================================================
# Copy this file to .env and configure with your values
# Generate secure keys using: openssl rand -base64 32

# =================================================================
# GENERAL CONFIGURATION
# =================================================================
export TIMEZONE="America/Chicago"
export USERNAME="$(whoami)"

# =================================================================
# POSTGRESQL DATABASE (with pgvector extension)
# =================================================================
export POSTGRES_USER="aistack"
export POSTGRES_PASSWORD="$(openssl rand -base64 16)"
export POSTGRES_DB="aistack_db"

# Resource Limits
export POSTGRES_MEMORY_LIMIT="2G"
export POSTGRES_CPU_LIMIT="2.0"
export POSTGRES_MEMORY_RESERVATION="512M"
export POSTGRES_CPU_RESERVATION="0.5"

# =================================================================
# REDIS CACHE
# =================================================================
export REDIS_PASSWORD="$(openssl rand -base64 16)"
export REDIS_MAX_MEMORY="512mb"

# Resource Limits
export REDIS_MEMORY_LIMIT="512M"
export REDIS_CPU_LIMIT="0.5"

# =================================================================
# OLLAMA AI MODEL SERVER
# =================================================================
export OLLAMA_VERSION="latest"
export OLLAMA_KEEP_ALIVE="24h"
export OLLAMA_MAX_MODELS="3"
export OLLAMA_PARALLEL="2"
export OLLAMA_FLASH_ATTENTION="true"

# Resource Limits - Adjust based on your system
export OLLAMA_MEMORY_LIMIT="12G"
export OLLAMA_CPU_LIMIT="6.0"
export OLLAMA_MEMORY_RESERVATION="2G"
export OLLAMA_CPU_RESERVATION="1.0"

# =================================================================
# N8N WORKFLOW AUTOMATION
# =================================================================
export N8N_VERSION="latest"
export N8N_HOST="0.0.0.0"
export N8N_PROTOCOL="http"
export N8N_WEBHOOK_URL="https://n8n.local"
export N8N_DB_SCHEMA="public"

# Security - Generate with: openssl rand -hex 16
export N8N_ENCRYPTION_KEY="$(openssl rand -hex 16)"
export N8N_API_KEY="CHANGEME_N8N_API_KEY"

# Features
export N8N_METRICS="true"
export N8N_LOG_LEVEL="info"
export N8N_AI_ENABLED="true"

# Resource Limits
export N8N_MEMORY_LIMIT="3G"
export N8N_CPU_LIMIT="2.0"
export N8N_MEMORY_RESERVATION="1G"
export N8N_CPU_RESERVATION="0.5"
export N8N_MAX_MEMORY="2048"

# =================================================================
# OPEN WEBUI
# =================================================================
export OPEN_WEBUI_VERSION="main"
export OPEN_WEBUI_NAME="${USERNAME}-Network"

# Security - Generate with: openssl rand -hex 16
export OPEN_WEBUI_SECRET_KEY="$(openssl rand -hex 16)"

# Authentication
export ENABLE_SIGNUP="false"
export DEFAULT_USER_ROLE="user"
export DEFAULT_LOCALE="en-US"

# AI Model Configuration
export DEFAULT_MODELS="llama3.2:3b,qwen2.5:7b-instruct"
export RAG_EMBEDDING_MODEL="nomic-embed-text"
export CHUNK_SIZE="1000"
export CHUNK_OVERLAP="200"

# Features
export ENABLE_IMAGE_GENERATION="true"
export ENABLE_RAG_WEB_SEARCH="true"

# RAG Web Search (SearXNG Integration)
export RAG_WEB_SEARCH_ENGINE="searxng"
export RAG_WEB_SEARCH_RESULT_COUNT="5"
export SEARXNG_QUERY_URL="http://searxng:8080/search?q=%{s}&format=json"

# Integration
export LITELLM_BASE_URL="http://litellm:4000"
export LITELLM_PORT="4000"

# Resource Limits
export OPEN_WEBUI_MEMORY_LIMIT="1G"
export OPEN_WEBUI_CPU_LIMIT="1.0"
export OPEN_WEBUI_MEMORY_RESERVATION="256M"
export OPEN_WEBUI_CPU_RESERVATION="0.25"

# =================================================================
# HOST FILESYSTEM MOUNTS - Open WebUI
# =================================================================
# Update these paths to match your system
export HOST_DOWNLOADS_PATH="/Users/${USERNAME}/Downloads"
export HOST_NETWORK_PATH="/Users/${USERNAME}/${USERNAME}Network"
export HOST_DROPZONE_PATH="/Users/${USERNAME}/Library/Mobile Documents/com~apple~CloudDocs/DropZone"
export HOST_DOCSTORE_PATH="/Users/${USERNAME}/Library/Mobile Documents/com~apple~CloudDocs/DocStore"

# =================================================================
# LITELLM PROXY
# =================================================================
export LITELLM_VERSION="main-stable"
export LITELLM_PORT="4000"

# Security
export LITELLM_MASTER_KEY="CHANGEME_LITELLM_MASTER_KEY"
export LITELLM_SALT_KEY="CHANGEME_LITELLM_SALT_KEY"
export LITELLM_UI_USERNAME="admin"
export LITELLM_UI_PASSWORD="CHANGEME_LITELLM_PASSWORD"

# Configuration
export LITELLM_LOG_LEVEL="INFO"

# Resource Limits
export LITELLM_MEMORY_LIMIT="1G"
export LITELLM_CPU_LIMIT="1.0"

# =================================================================
# N8N MCP SERVER
# =================================================================
export N8N_MCP_VERSION="latest"
export N8N_MCP_AUTH_TOKEN="CHANGEME_N8N_MCP_TOKEN"
export N8N_MCP_LOG_LEVEL="info"
export N8N_MCP_MODE="http"

# Resource Limits
export N8N_MCP_MEMORY_LIMIT="512M"
export N8N_MCP_CPU_LIMIT="0.5"

# =================================================================
# MCPO (MCP ORCHESTRATOR)
# =================================================================
export MCPO_VERSION="main"
export MCPO_API_KEY="CHANGEME_MCPO_API_KEY"
export MCPO_SERVER_TYPE="streamable_http"
export MCPO_LOG_LEVEL="info"

# Resource Limits
export MCPO_MEMORY_LIMIT="256M"
export MCPO_CPU_LIMIT="0.25"

# =================================================================
# SEARXNG WEB SEARCH ENGINE
# =================================================================
export SEARXNG_VERSION="latest"

# Security - Generate with: openssl rand -hex 16
export SEARXNG_SECRET_KEY="$(openssl rand -hex 16)"

# Resource Limits
export SEARXNG_MEMORY_LIMIT="512M"
export SEARXNG_CPU_LIMIT="0.5"
export SEARXNG_MEMORY_RESERVATION="128M"
export SEARXNG_CPU_RESERVATION="0.1"

# =================================================================
# SECURITY KEY GENERATION COMMANDS
# =================================================================
# Run these commands to generate secure keys:
#
# 32-character hex key (for encryption keys):
#   openssl rand -hex 16
#
# Base64 password (for passwords):
#   openssl rand -base64 32
#
# API key (24 characters):
#   openssl rand -base64 24
# =================================================================
